import{d as Z,e as $,n as V,m as s,q as P,r as d,o as I,c as S,g as e,y as M,z as G,B as W,C as uu,a as E,h as l,k as B,l as x,t as j,j as q,b as H,A as eu,N as L}from"./app.0ce71bde.js";import{a as ou}from"./index.17bc6917.js";let tu=a=>crypto.getRandomValues(new Uint8Array(a)),su=(a,r,A)=>{let m=(2<<Math.log(a.length-1)/Math.LN2)-1,h=-~(1.6*m*r/a.length);return(D=r)=>{let n="";for(;;){let U=A(h),i=h;for(;i--;)if(n+=a[U[i]&m]||"",n.length===D)return n}}},Fu=(a,r=21)=>su(a,r,tu);const au={class:"p-3 h-screen"},nu={class:"bg-hex-F2EFF6 p-3"},lu={class:"text-sm"},iu={class:"bg-white border-t border-hex-ccc flex justify-between py-3 px-2"},cu=e("div",null,"\u7B7E\u5230\u5217\u8868\u662F\u5426\u53EF\u89C1",-1),du=x("\u53EF\u89C1"),Eu=x("\u4E0D\u53EF\u89C1"),ru={class:"bg-white border-t border-hex-ccc flex justify-between py-3 px-2"},pu=e("span",null,"\u6D3B\u52A8\u65F6\u957F",-1),vu={class:"text-center mb-5 mt-5"},Cu={key:0,class:"rounded bg-hex-41AA62 text-white p-3 px-7"},gu={key:2,class:"flex justify-center rounded bg-hex-99CDAC text-white p-3 px-7"},mu=x("\u53D1\u8D77\u4E2D... "),hu={class:"text-sm p-2 bg-hex-E0FAFB text-hex-003399 border border-hex-A6DEFB mt-3 mx-5"},fu={class:"text-3xl mt-5"},_u={class:"bg-hex-F7F7F7 mt-4 text-sm text-left p-4 leading-loose"},Bu=eu('<div class="color-hex-41AA62">\u600E\u4E48\u7B7E\u5230</div><div class="bg-hex-f7f7f7 px-4"> \u5148\u6253\u5F00WIFI\uFF08\u53EA\u9700\u8981\u6253\u5F00\uFF0C\u8FDE\u4E0D\u8FDE\u63A5\u90FD\u53EF\u4EE5\uFF09\uFF0C\u7136\u540E\u70B9\u51FB\u4E0A\u65B9\u7B7E\u5230\u6309\u94AE </div><div class="color-hex-41AA62 mt-2">\u5B9A\u4F4D\u5931\u8D25\u600E\u4E48\u529E</div><div class="bg-hex-f7f7f7 px-4"> \u786E\u4FDDWIFI\u5DF2\u7ECF\u6253\u5F00\uFF0C\u4E14\u80FD\u591F\u641C\u7D22\u5230\u5468\u56F4\u7684WIFI\u4FE1\u53F7\uFF0C\u6700\u597D\u540C\u65F6\u6253\u5F00GPS </div><div class="color-hex-41AA62 mt-2">\u6709\u95EE\u9898\u3001\u610F\u89C1\u3001\u5EFA\u8BAE</div><div class="bg-hex-f7f7f7 px-4"> \u5982\u679C\u5728\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u6709\u4EC0\u4E48\u95EE\u9898\u3001\u610F\u89C1\u6216\u5EFA\u8BAE\uFF0C\u5E76\u4E14\u5728<a class="color-hex-0066FF">\u4F7F\u7528\u5E2E\u52A9</a>\u4E2D\u4E5F\u65E0\u6CD5\u627E\u5230\u60F3\u8981\u7684\u7ED3\u679C\u65F6 \uFF0C\u53EF\u4EE5\u901A\u8FC7<a class="color-hex-0066FF">\u7559\u8A00\u53CD\u9988</a>\u8054\u7CFB\u6211\u4EEC\uFF0C\u7559\u8A00\u65F6\u8BF7\u52A1\u5FC5\u8BF4\u660E\u5177\u4F53\u60C5\u51B5\uFF08\u5982\u7B7E\u5230\u95EE\u9898\u8BF7\u8BF4\u660E\u5F53\u524D\u65F6\u95F4\u3001\u5730\u70B9\u3001\u7B7E\u5230\u65B9\u5F0F\u7B49\u7B49\u5177\u4F53\u95EE\u9898\u63CF\u8FF0\uFF09 </div>',6),xu={class:"mt-5"},Au=x(" \u67E5\u770B\u66F4\u591A\u5E2E\u52A9 "),Du=Z({setup(a){const r=Fu("1234567890abcdef",5),A=$(),m=V();let h=s(0),D=s(0),n=s(!0);(function(){new BMapGL.Geolocation().getCurrentPosition(function(o){this.getStatus()==BMAP_STATUS_SUCCESS?(h.value=o.point.lng,D.value=o.point.lat,n.value=!1):alert("failed"+this.getStatus())},function(o){console.warn("ERROR("+o.code+"): "+o.message)},{enableHighAccuracy:!0})})();const i=s(!0),F=P({longitude:0,latitude:0,signName:"",os:"windows10",browser:"chrome",ip:"127.0.0.1",duration:10,visible:1,spaceId:0});let t=P({attend:null,createTime:"",id:0,signCode:"",signName:"",spaceName:null,status:null}),p=s(""),v=s(1),R=s(10);const z=typeof m.query.spaceId=="undefined"?0:+m.query.spaceId,T=s(!1),O=function(){T.value=!0,n.value=!0,v.value,p.value,b.value,R.value,F.longitude=h.value,F.latitude=D.value,F.signName=p.value||`signName${r()}`,F.duration=R.value,F.visible=v.value,F.spaceId=z,ou(F).then(u=>{u.code===401?(L({message:"\u8EAB\u4EFD\u9A8C\u8BC1\u5931\u6548!",color:"#fff",background:"rgba(0,0,0,.7)",duration:700}),A.push({path:"/"})):u.code===501?L({message:u.msg,color:"#fff",background:"rgba(0,0,0,.7)",duration:700}):(t.attend=u.data.attend,t.createTime=u.data.createTime,t.id=u.data.id,t.signCode=u.data.signCode,t.signName=u.data.signName,t.spaceName=u.data.spaceName,t.status=u.data.status,L({message:`${F.duration}\u5206\u949F\u540E\u81EA\u52A8\u7ED3\u675F\u7B7E\u5230`,color:"#fff",background:"rgba(0,0,0,.7)",duration:700}),i.value=!i.value)})},J=function(){A.push({path:"/record/checkRecord",query:{id:t.id}})},f=s(!1),K=()=>{f.value=!0};let b=s("10\u5206\u949F");const Q=s([{values:["0\u5929","1\u5929","2\u5929","3\u5929","4\u5929","5\u5929","6\u5929"],defaultIndex:0},{values:["0\u5C0F\u65F6","1\u5C0F\u65F6","2\u5C0F\u65F6","3\u5C0F\u65F6","4\u5C0F\u65F6","5\u5C0F\u65F6","6\u5C0F\u65F6","7\u5C0F\u65F6","8\u5C0F\u65F6","9\u5C0F\u65F6","10\u5C0F\u65F6","11\u5C0F\u65F6","12\u5C0F\u65F6","13\u5C0F\u65F6","14\u5C0F\u65F6","15\u5C0F\u65F6","16\u5C0F\u65F6","17\u5C0F\u65F6","18\u5C0F\u65F6","19\u5C0F\u65F6","20\u5C0F\u65F6","21\u5C0F\u65F6","22\u5C0F\u65F6","23\u5C0F\u65F6"],defaultIndex:0},{values:["0\u5206\u949F","1\u5206\u949F","2\u5206\u949F","3\u5206\u949F","4\u5206\u949F","5\u5206\u949F","6\u5206\u949F","7\u5206\u949F","8\u5206\u949F","9\u5206\u949F","10\u5206\u949F","11\u5206\u949F","12\u5206\u949F","13\u5206\u949F","14\u5206\u949F","15\u5206\u949F","16\u5206\u949F","17\u5206\u949F","18\u5206\u949F","19\u5206\u949F","20\u5206\u949F","21\u5206\u949F","22\u5206\u949F","23\u5206\u949F","24\u5206\u949F","25\u5206\u949F","26\u5206\u949F","27\u5206\u949F","28\u5206\u949F","29\u5206\u949F","30\u5206\u949F","31\u5206\u949F","32\u5206\u949F","33\u5206\u949F","34\u5206\u949F","35\u5206\u949F","36\u5206\u949F","37\u5206\u949F","38\u5206\u949F","39\u5206\u949F","40\u5206\u949F","41\u5206\u949F","42\u5206\u949F","43\u5206\u949F","44\u5206\u949F","45\u5206\u949F","46\u5206\u949F","47\u5206\u949F","48\u5206\u949F","49\u5206\u949F","50\u5206\u949F","51\u5206\u949F","52\u5206\u949F","53\u5206\u949F","54\u5206\u949F","55\u5206\u949F","56\u5206\u949F","57\u5206\u949F","58\u5206\u949F","59\u5206\u949F"],defaultIndex:10}]),X=()=>{f.value=!1},Y=u=>{b.value="";for(var o=0;o<3;o++)u[o].charAt(0)!=="0"&&(b.value+=u[o]);let _=u[0][0]==="0"?0:u[0][0],C=u[1][0]==="0"?0:u[1][0],g=u[2][0]==="0"?0:+u[2][0];u[1][0]!=="0"&&u[1][1]!="\u5C0F"&&(C=C+u[1][1]),u[2][0]!=="0"&&u[2][1]!="\u5206"&&(g=g+u[2][1]);let w=_*1440,y=C*60,N=g,k=Number(w)+Number(y)+Number(N);R.value=k,f.value=!1};return(u,o)=>{const _=d("van-radio"),C=d("van-radio-group"),g=d("van-icon"),w=d("van-picker"),y=d("van-popup"),N=d("van-loading"),k=d("van-button");return I(),S("div",au,[e("div",nu,[M(e("div",null,[e("div",lu,[e("div",null,[M(e("input",{class:"w-100% p-3","onUpdate:modelValue":o[0]||(o[0]=c=>W(p)?p.value=c:p=c),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u4E0D\u586B\u5C06\u81EA\u52A8\u751F\u6210\uFF09"},null,512),[[uu,E(p)]])]),e("div",iu,[cu,l(C,{modelValue:E(v),"onUpdate:modelValue":o[1]||(o[1]=c=>W(v)?v.value=c:v=c),direction:"horizontal"},{default:B(()=>[l(_,{"icon-size":"15px",name:1},{default:B(()=>[du]),_:1}),l(_,{"icon-size":"15px",name:0},{default:B(()=>[Eu]),_:1})]),_:1},8,["modelValue"])]),e("div",ru,[pu,e("span",{class:"text-hex-1989FA",onClick:K},[x(j(E(b)),1),l(g,{name:"arrow-down"})]),l(y,{show:f.value,"onUpdate:show":o[2]||(o[2]=c=>f.value=c),position:"bottom",style:{height:"50%"}},{default:B(()=>[l(w,{title:"\u6D3B\u52A8\u65F6\u957F",columns:Q.value,onConfirm:Y,onCancel:X},null,8,["columns"])]),_:1},8,["show"])])]),e("div",vu,[E(n)&&!T.value?(I(),S("span",Cu," \u6B63\u5728\u83B7\u53D6\u4F4D\u7F6E\u4FE1\u606F\u2026\u2026 ")):q("",!0),E(n)?q("",!0):(I(),S("div",{key:1,class:"rounded bg-hex-41AA62 text-white p-3 px-7",onClick:O}," \u53D1\u8D77\u7B7E\u5230 ")),T.value?(I(),S("div",gu,[l(N,{size:"20px",type:"spinner"}),mu])):q("",!0)])],512),[[G,i.value]]),M(e("div",null,[e("div",hu,j(E(t).signName),1),e("div",fu,j(E(t).signCode),1),e("div",{class:"text-center mb-5 mt-8"},[e("span",{class:"rounded text-hex-41AA62 border-1 py-3 px-4 text-xl",onClick:J}," \u67E5\u770B\u7B7E\u5230\u8BB0\u5F55 ")])],512),[[G,!i.value]])]),e("div",_u,[Bu,e("div",xu,[l(k,{size:"large",color:"rgb(129,185,138)"},{default:B(()=>[Au]),_:1})])])])}}});typeof H=="function"&&H(Du);export{Du as default};
