import{n as be,m as a,q as m,e as we,s as xe,r as d,o as c,c as i,g as o,l as A,t as S,a as U,h as n,j as b,k as u,b as H,T as J,N as v,F as K,i as O,I as _e,p as ge}from"./app.0ce71bde.js";import{g as ke,u as ye,d as Ce,q as Se}from"./index.0854e187.js";import{g as k,d as E,u as W}from"./spaceMember.9adb8b4e.js";const Ie={class:"bg-gray-500/8 p-3 min-h-screen"},Ne=o("div",{class:"text-left text-hex-aaa text-xs ml-3"}," \u7A7A\u95F4\u4FE1\u606F ",-1),De={class:"bg-hex-fff rounded px-5 pt-2 text-hex-666 border border-hex-ccc"},$e={class:"flex justify-between border-b border-hex-ccc text-14px py-2"},Ue=o("span",null,"\u7A7A\u95F4\u540D\u79F0",-1),Ae={class:"flex justify-between text-14px py-2"},qe=o("span",null,"\u6210\u5458",-1),Fe={class:"mt-5 px-10"},Re=o("div",{class:"text-left text-hex-aaa text-xs ml-3 mt-3"}," \u5E94\u7528 ",-1),Te={class:"bg-white p-3 py-5 rounded border border-hex-10AA62"},Ve={grid:"~ cols-3"},Me=["onClick"],je={class:"mt-3 text-14px"},Be=o("div",{class:"text-left mt-3 text-hex-aaa text-xs ml-3"}," \u6210\u5458 ",-1),Le={class:"bg-white rounded items-center p-1 border border-hex-ccc"},ze=o("div",{class:"flex items-center text-sm py-2"},[o("span",{class:"flex-1"},"\u5B66\u53F7/\u5DE5\u53F7"),o("span",{class:"flex-1"},"\u59D3\u540D"),o("span",{class:"flex-1"},"\u89D2\u8272")],-1),Ee={class:"flex-1 font-sans"},Pe={class:"flex-1"},Qe={class:"flex-1"},Ze={key:0},Ge=A("\u8D1F\u8D23\u4EBA"),He={key:1},Je=A("\u7BA1\u7406\u5458"),Ke={key:2,class:"text-xs"},Oe=A("\u6210\u5458"),We={style:{transform:"rotate(90deg)",position:"absolute",right:"1em"}},Xe={setup(Ye){const X=be(),P=a(0);a(!1),a(!0);const Y=m([{title:"\u53D1\u8D77\u7B7E\u5230",icon:"i-carbon-3d-cursor-alt",link:"/launch"},{title:"\u53D1\u8D77\u6295\u7968",icon:"i-carbon-receipt",link:"vote"},{title:"\u53D1\u8D77\u62BD\u7B7E",icon:"i-carbon-align-box-middle-center",link:"draw"},{title:"\u53D1\u8D77\u70B9\u540D",icon:"i-carbon-user-certification",link:"call_the_roll"},{title:"\u6210\u5458\u8FFD\u52A0",icon:"i-carbon-user-follow",link:"add_member"},{title:"\u7B7E\u5230\u7EDF\u8BA1",icon:"i-carbon-report",link:"scorecard"}]),r=a([]),I=we();a(!0);const l=a(X.query.id),ee=s=>{s.title!=="\u53D1\u8D77\u7B7E\u5230"?I.push({path:`manage/${s.link}`,query:{id:l.value}}):I.push({path:s.link,query:{spaceId:l.value}})},w=m({id:"",spaceName:"",count:"",createTime:""}),f=m({spaceName:"",spaceId:0}),Q=m({spaceId:0}),N=m({userId:"",spaceId:0}),D=m({userId:"",spaceId:0}),y=m({userId:"",spaceId:0}),Z=m({userId:"1905040121",spaceId:0}),h=a(0);ke(l.value).then(s=>{h.value=s.data.memberRank,w.id=s.data.id,w.createTime=s.data.createTime,w.spaceName=s.data.spaceName,w.count=s.data.count,f.spaceName=s.data.spaceName,f.spaceId=s.data.id,Q.spaceId=s.data.id,y.spaceId=s.data.id,y.userId=s.data.id,Z.spaceId=s.data.id}),k(l.value).then(s=>{s.code===200&&(r.value=s.rows)});const te=()=>{ye(f).then(s=>{s.code===200?/^[\u4E00-\u9FA5A-Za-z0-9\,\(\)\[\]_\"\'\u2018\u2019\u201C\u201D\u3010\u3011\uFF08\uFF09\u3001\uFF0C]+$/.test(f.spaceName)&&(J("\u4FEE\u6539\u6210\u529F"),w.spaceName=f.spaceName):v({type:"warning",message:s.msg})})},se=()=>{Ce(Q).then(s=>{s.code===200&&(v({type:"primary",message:"\u89E3\u6563\u6210\u529F"}),I.replace("/Space"))})},q=a(!1),F=a(!1),R=a(!1),T=a(!1),x=a(!1),_=a(!1),C=a(!1),V=a(!1),M=a(!1),oe=s=>{s.memberRank===1?(x.value=!0,N.userId=s.userId,N.spaceId=l):h.value===2?(_.value=!0,D.userId=s.userId,D.spaceId=l):h.value===1&&(C.value=!0,y.userId=s.userId,y.spaceId=l)},ne=["\u53D6\u6D88\u7BA1\u7406\u5458\u8D44\u683C","\u5220\u9664\u6210\u5458"],ae=(s,e)=>{e===0?W(N).then($=>{k(l.value).then(p=>{p.code===200&&(r.value=p.rows,x.value=!1,v({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}))})}):e===1&&(R.value=!0)},le=()=>{E(N).then(s=>{k(l.value).then(e=>{e.code===200&&(r.value=e.rows,x.value=!1,v({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}))})})},ce=()=>{E(D).then(s=>{k(l.value).then(e=>{e.code===200&&(r.value=e.rows,_.value=!1,v({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}))})})},ie=()=>{E(y).then(s=>{k(l.value).then(e=>{e.code===200&&(r.value=e.rows,C.value=!1,v({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}))})})},ue=["\u8BBE\u4E3A\u7BA1\u7406\u5458","\u5220\u9664\u6210\u5458"],de=["\u5220\u9664\u6210\u5458"],j=()=>{x.value=!1,_.value=!1,C.value=!1,J("\u53D6\u6D88")},re=(s,e)=>{e===0?W(D).then($=>{k(l.value).then(p=>{p.code===200&&(r.value=p.rows,_.value=!1,v({type:"success",message:"\u64CD\u4F5C\u6210\u529F"}))})}):e===1&&(T.value=!0)},pe=(s,e)=>{e===0&&(V.value=!0)},me=()=>{Se(Z).then(s=>{s.code===200&&(v({type:"primary",message:"\u9000\u51FA\u6210\u529F"}),I.replace("/Space"))})};return xe(()=>{window.scrollTo(0,0)}),(s,e)=>{const $=d("van-icon"),p=d("van-field"),g=d("van-dialog"),G=d("van-tab"),B=d("van-tag"),ve=d("van-list"),L=d("van-picker"),z=d("van-popup"),fe=d("van-tabs");return c(),i("div",Ie,[Ne,o("div",De,[o("div",$e,[Ue,o("span",null,[A(S(U(w).spaceName)+" ",1),h.value===2?(c(),i("span",{key:0,onClick:e[0]||(e[0]=t=>q.value=!0)},[n($,{name:"edit"})])):b("",!0)])]),o("div",Ae,[qe,o("span",null,S(r.value.length)+"\u4EBA ",1)]),n(g,{show:q.value,"onUpdate:show":e[2]||(e[2]=t=>q.value=t),title:"\u4FEE\u6539\u7A7A\u95F4\u540D\u79F0","confirm-button-color":"rgb(63,133,255)","show-cancel-button":"",onConfirm:e[3]||(e[3]=t=>te())},{default:u(()=>[o("div",Fe,[n(p,{modelValue:U(f).spaceName,"onUpdate:modelValue":e[1]||(e[1]=t=>U(f).spaceName=t),class:"border-b border-hex-ccc mb-3",placeholder:"\u8BF7\u8F93\u5165\u65B0\u7684\u7A7A\u95F4\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u540D\u79F0"}]},null,8,["modelValue"])])]),_:1},8,["show"]),n(g,{show:F.value,"onUpdate:show":e[4]||(e[4]=t=>F.value=t),title:"\u662F\u5426\u89E3\u6563\u6B64\u7A7A\u95F4","confirm-button-color":"rgb(63,133,255)","show-cancel-button":"",onConfirm:e[5]||(e[5]=t=>se())},null,8,["show"]),n(g,{show:R.value,"onUpdate:show":e[6]||(e[6]=t=>R.value=t),title:"\u662F\u5426\u5220\u9664\u6B64\u6210\u5458","confirm-button-color":"rgb(63,133,255)","show-cancel-button":"",onConfirm:e[7]||(e[7]=t=>le())},null,8,["show"]),n(g,{show:T.value,"onUpdate:show":e[8]||(e[8]=t=>T.value=t),title:"\u662F\u5426\u5220\u9664\u6B64\u6210\u5458","confirm-button-color":"rgb(63,133,255)","show-cancel-button":"",onConfirm:e[9]||(e[9]=t=>ce())},null,8,["show"]),n(g,{show:V.value,"onUpdate:show":e[10]||(e[10]=t=>V.value=t),title:"\u662F\u5426\u5220\u9664\u6B64\u6210\u5458","confirm-button-color":"rgb(63,133,255)","show-cancel-button":"",onConfirm:e[11]||(e[11]=t=>ie())},null,8,["show"]),n(g,{show:M.value,"onUpdate:show":e[12]||(e[12]=t=>M.value=t),title:"\u662F\u5426\u9000\u51FA\u7A7A\u95F4","confirm-button-color":"rgb(63,133,255)","show-cancel-button":"",onConfirm:e[13]||(e[13]=t=>me())},null,8,["show"])]),n(fe,{active:P.value,"onUpdate:active":e[19]||(e[19]=t=>P.value=t),class:"mt-3",color:"rgb(40,182,72)"},{default:u(()=>[n(G,{title:"\u6982\u51B5"},{default:u(()=>[Re,o("div",Te,[o("div",Ve,[(c(!0),i(K,null,O(U(Y),t=>(c(),i("div",{key:t,class:"mb-5 mx-auto inline-block text-hex-666 w-20vw h-20vw",onClick:he=>ee(t,l.value)},[o("div",{class:_e(["mt-2",t.icon]),text:"2xl",color:"green-600",m:"auto"},null,2),o("div",je,S(t.title),1)],8,Me))),128))])]),h.value===1?(c(),i("div",{key:0,class:"p-2 bg-white mt-3 rounded border border-hex-ccc text-red font-600",onClick:e[14]||(e[14]=t=>M.value=!0)}," \u9000\u51FA\u7A7A\u95F4 ")):b("",!0),h.value===2?(c(),i("div",{key:1,class:"p-2 bg-white mt-3 rounded border border-hex-ccc text-red font-600",onClick:e[15]||(e[15]=t=>F.value=!0)}," \u89E3\u6563\u7A7A\u95F4 ")):b("",!0)]),_:1}),n(G,{title:"\u6210\u5458"},{default:u(()=>[Be,o("div",Le,[n(ve,null,{default:u(()=>[ze,(c(!0),i(K,null,O(r.value,t=>(c(),i("div",{key:t,class:"flex items-center text-sm py-2 border-t border-hex-ddd"},[o("div",Ee,S(t.userId),1),o("div",Pe,S(t.name),1),o("div",Qe,[t.memberRank==2?(c(),i("span",Ze,[n(B,{color:"#38bdf8"},{default:u(()=>[Ge]),_:1})])):b("",!0),t.memberRank==1?(c(),i("span",He,[n(B,{color:"#10b981"},{default:u(()=>[Je]),_:1})])):b("",!0),t.memberRank==0?(c(),i("span",Ke,[n(B,{plain:"",color:"#78716c"},{default:u(()=>[Oe]),_:1})])):b("",!0)]),o("span",We,[t.memberRank<h.value?(c(),ge($,{key:0,name:"ellipsis",onClick:he=>oe(t)},null,8,["onClick"])):b("",!0)])]))),128))]),_:1})])]),_:1}),n(z,{show:x.value,"onUpdate:show":e[16]||(e[16]=t=>x.value=t),position:"bottom",style:{height:"50%"}},{default:u(()=>[n(L,{class:"mt-10",title:"\u8BF7\u9009\u62E9\u64CD\u4F5C",columns:ne,onConfirm:ae,onCancel:j})]),_:1},8,["show"]),n(z,{show:_.value,"onUpdate:show":e[17]||(e[17]=t=>_.value=t),position:"bottom",style:{height:"50%"}},{default:u(()=>[n(L,{class:"mt-10",title:"\u8BF7\u9009\u62E9\u64CD\u4F5C",columns:ue,onConfirm:re,onCancel:j})]),_:1},8,["show"]),n(z,{show:C.value,"onUpdate:show":e[18]||(e[18]=t=>C.value=t),position:"bottom",style:{height:"50%"}},{default:u(()=>[n(L,{class:"mt-10",title:"\u8BF7\u9009\u62E9\u64CD\u4F5C",columns:de,onConfirm:pe,onCancel:j})]),_:1},8,["show"])]),_:1},8,["active"])])}}};typeof H=="function"&&H(Xe);export{Xe as default};
