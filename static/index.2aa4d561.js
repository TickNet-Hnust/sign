import{d as S,n as G,e as J,m as i,q as K,x as Q,r as d,o as _,c as h,g as o,y as f,C as w,a,F as W,i as X,h as u,t as v,l as x,k as D,b as B,H as F}from"./app.0ce71bde.js";import{d as Y}from"./draw.ee1302d6.js";const Z={class:"bg-gray-100 p-3"},ee={class:"bg-white rounded p-3 text-sm"},oe={class:"text-left text-lg font-bold"},te={class:"text-left mt-2 pt-1rem border-t-1 border-hex-C9C9C9"},ne={class:"bg-white rounded mt-3 p-3 text-sm"},se=o("div",{class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 py-1"},[o("span",null,"\u8BBE\u7F6E\u62BD\u7B7E\u9009\u9879")],-1),ue={class:"inline-block w-140px"},le=["onClick"],ae=["onUpdate:modelValue","placeholder"],ie={class:"inline-block w-100px"},de=["onClick"],re={class:"bg-hex-D7D7D7 color-hex-633333 ml-2 py-0.7 px-3 text-sm"},pe=["onClick"],ce={class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 text-blue-800 py-3"},me={class:"bg-blue-700 rounded-1/2 text-white text-xs py-0.7 px-1 mr-2"},ve=x(" \u6DFB\u52A0\u9009\u9879 "),xe={class:"bg-white rounded mt-3 p-3 text-sm"},be={class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 py-1"},Ce=o("span",null,"\u9690\u85CF\u9009\u9879",-1),_e={class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 py-3"},he=o("span",null," \u6BCF\u4EBA\u53EF\u53C2\u4E0E\u62BD\u7B7E\u6B21\u6570 ",-1),fe={class:"bg-hex-D7D7D7 color-hex-633333 ml-2 py-0.7 px-3 text-sm"},we={class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 py-3"},De=o("span",null," \u6301\u7EED\u65F6\u95F4(\u5206\u949F) ",-1),ye={class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 py-3"},Ee=o("span",null,"\u62BD\u7B7E\u7ED3\u679C\u67E5\u770B\u6743\u9650",-1),Be=o("div",{class:"text-left text-xs mt-2",style:{color:"#999"}}," 1<=\u6BCF\u4EBA\u53EF\u53C2\u4E0E\u62BD\u7B7E\u6B21\u6570<\u62BD\u7B7E\u603B\u6570 ",-1),Fe={class:"my-5"},ke=x(" \u53D1\u8D77\u62BD\u7B7E "),ge=S({setup(Ne){const k=G(),g=J(),b=i(3),C=i(!1),r=i(!1),c=i("00:30"),N=["\u4EC5\u53D1\u8D77\u4EBA\u53EF\u89C1","\u53C2\u4E0E\u4EBA\u53EF\u89C1"],p=i(!1),$=i(0),n=K({drawName:"",drawNum:1,anonymous:0,visible:Q(()=>C.value?0:1),describe:"",duration:30,option:[{optionId:1,content:"",num:1},{optionId:2,content:"",num:1}],spaceId:0}),V=s=>{s.num>1&&(s.num=s.num-1)},A=s=>{s.num=s.num+1},I=()=>{const s={optionId:b.value,content:"",num:1};n.option.push(s),b.value=b.value+1},U=(s,e)=>{console.warn(s),n.option.splice(e,1)},j=()=>{n.drawNum>1&&(n.drawNum=n.drawNum-1)},T=()=>{n.drawNum=n.drawNum+1},M=()=>{const s=c.value.split(":");n.duration=Number(s[0])*60+Number(s[1]),r.value=!1},q=()=>{const s=n.duration%60,e=Math.floor(n.duration/60);r.value=!1,c.value=`${e}:${s}`},z=(s,e)=>{n.anonymous=e,$.value=e,p.value=!1},O=()=>{const s={drawName:n.drawName,visible:n.visible,duration:n.duration,spaceId:k.query.id,anonymity:n.anonymous,optionContent:[""],optionNum:[0]};s.optionContent.pop(),s.optionNum.pop(),n.option.forEach(e=>{s.optionContent.push(e.content),s.optionNum.push(e.num)}),Y(s).then(e=>{if(console.warn(e),e.code===500||e.code===501)F.alert({message:e.msg});else if(e.code===200){const l=e.data;F.alert({message:"\u521B\u5EFA\u6210\u529F"}).then(()=>{g.push({path:"/space/manage/draw/owner_draw",query:{id:l}})})}})};return(s,e)=>{const l=d("van-icon"),P=d("van-switch"),R=d("van-datetime-picker"),y=d("van-popup"),H=d("van-picker"),L=d("van-button");return _(),h("div",Z,[o("div",ee,[o("div",oe,[f(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a(n).drawName=t),placeholder:"\u62BD\u7B7E\u6807\u9898"},null,512),[[w,a(n).drawName]])]),o("div",te,[f(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a(n).describe=t),placeholder:"\u63CF\u8FF0\uFF08\u9009\u586B\uFF09"},null,512),[[w,a(n).describe]])])]),o("div",ne,[se,(_(!0),h(W,null,X(a(n).option,(t,E)=>(_(),h("div",{key:t.optionId,class:"flex justify-between items-center border-b-1 border-hex-C9C9C9 py-3"},[o("span",ue,[o("i",{class:"bg-red-500 rounded-1/2 text-white text-xs py-0.7 px-1 mr-2",onClick:m=>U(t,E)},[u(l,{name:"minus"})],8,le),f(o("input",{"onUpdate:modelValue":m=>t.content=m,placeholder:`\u9009\u9879${E+1}`,class:"w-100px"},null,8,ae),[[w,t.content]])]),o("span",ie,[o("i",{class:"bg-hex-D7D7D7 color-hex-633333 text-xs p-1",onClick:m=>V(t)},[u(l,{name:"minus"})],8,de),o("i",re,v(t.num),1),o("i",{class:"bg-hex-D7D7D7 color-hex-633333 ml-2 text-xs p-1",onClick:m=>A(t)},[u(l,{name:"plus"})],8,pe)])]))),128)),o("div",ce,[o("span",{onClick:e[2]||(e[2]=t=>I())},[o("i",me,[u(l,{name:"plus"})]),ve])])]),o("div",xe,[o("div",be,[Ce,o("span",null,[u(P,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=t=>C.value=t),size:"1.5em"},null,8,["modelValue"])])]),o("div",_e,[he,o("span",null,[o("i",{class:"bg-hex-D7D7D7 color-hex-633333 text-xs p-1",onClick:e[4]||(e[4]=t=>j())},[u(l,{name:"minus"})]),o("i",fe,v(a(n).drawNum),1),o("i",{class:"bg-hex-D7D7D7 color-hex-633333 ml-2 text-xs p-1",onClick:e[5]||(e[5]=t=>T())},[u(l,{name:"plus"})])])]),o("div",we,[De,o("span",null,[x(v(a(n).duration)+" ",1),o("i",null,[u(l,{name:"arrow",onClick:e[6]||(e[6]=t=>r.value=!0)})]),u(y,{show:r.value,"onUpdate:show":e[10]||(e[10]=t=>r.value=t),position:"bottom"},{default:D(()=>[u(R,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=t=>c.value=t),type:"time",title:"\u9009\u62E9\u6301\u7EED\u65F6\u95F4","min-hour":0,"max-hour":23,onConfirm:e[8]||(e[8]=t=>M()),onCancel:e[9]||(e[9]=t=>q())},null,8,["modelValue"])]),_:1},8,["show"])])]),o("div",ye,[Ee,o("span",null,[x(v(a(n).anonymous?"\u53C2\u4E0E\u4EBA\u53EF\u89C1":"\u4EC5\u53D1\u8D77\u4EBA\u53EF\u89C1")+" ",1),o("i",null,[u(l,{name:"arrow",onClick:e[11]||(e[11]=t=>p.value=!0)})]),u(y,{show:p.value,"onUpdate:show":e[13]||(e[13]=t=>p.value=t),position:"bottom"},{default:D(()=>[u(H,{title:"\u6807\u9898",columns:N,"default-index":1,onConfirm:z,onCancel:e[12]||(e[12]=t=>p.value=!1)})]),_:1},8,["show"])])])]),Be,o("div",Fe,[u(L,{type:"primary",size:"large",color:"rgb(40,182,72)",onClick:e[14]||(e[14]=t=>O())},{default:D(()=>[ke]),_:1})])])}}});typeof B=="function"&&B(ge);export{ge as default};
